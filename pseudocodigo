// GRUPO 1 - SISTEMAS OPERATIVOS
// Archivo del pseudocódigo

class Memoria () {
  // Atributos
  + tamaño: Real
  + tamañoDisponible: Real
  + procesos: List
  + ultimaPosicion: Real
  + primeraPosicion: Real
  + particiones: List

  constructor(tamaño) {
    this.tamaño = tamaño;
    this.tamañoDisponible = tamaño;
    this.proceso = [];
    this.particiones = [];
    this.primeraPosicion = 0;
    this.ultimaPosicion = 0;
  }

  // Métodos
  + actualizar_tamaño_disponible(tamaño): Boolean {
    memoria.tamaño_disponible = memoria.tamaño_disponible - tamaño;
  }
  + actualizar_primera_posicion(posicion) {
    this.primeraPosicion = posicion;
  }
  + actualizar_ultima_posicion(posicion): Boolean {
    this.ultima_posicion = posicion;
  }
  + cargar_proceso(proceso): Boolean {
    particion.setear_fragmentacionInterna(proceso.tamaño);
    memoria.procesos.push(proceso);
	  memoria.actualizar_tamaño_disponible(proceso.tamaño);
	  // memoria.actualizar_ultima_posicion(proceso.tamaño);
  }

  + crear_particion(tamaño, posicionInicio, posicionFin) {
    particion = new Particiones({
      // id = proceso.id;
      tamaño,
      posicionInicio,
      posicionFin
      // // sistema operativo ((100 + 0) - 1 ) = 99 ---> memoria.ultimaPosicion;
      // // P1 (250 + 99) = 349 ---> memoria.ultimaPosicion;
      // // P2 (120 + 349) = 469 ---> memoria.ultimaPosicion;
      // // P3 (60 + 469) = 529 ---> memoria.ultimaPosicion;
      // // memoria.actualizar_ultima_posicion(proceso.tamaño - 1);
    });
    this.actualizar_primera_posicion(posicionInicio);
    this.actualizar_ultima_posicion(posicionFin);
  }
}

// memoria = new Memoria(530);
// const sistema_operativo = new SistemaOperativo({
//   id: 1,
//   tamaño: 100k,
// })
// memoria.crear_particion(sistema_operativo);


class Particiones () {
  // Atributos
  // + id: Integer
  + tamaño: Real
  + posicionInicio: Real
  + posicionFin: Real
  + fragmentacionInterna: Real
  // + procesos: Object

  // Métodos
  constructor(tamaño, posicionInicio, posicionFin) {
    // particion.id = id;
    this.tamaño = tamaño;
    this.posicionInicio = posicionInicio;
    this.posicionFin = posicionFin;
    this.fragmentacionInterna = 0;
    // particion.procesos = null;
  }
  + set_fragmentacion_interna(tamañoProceso) {
    particion.fragmentacionInterna = particion.tamaño - tamañoProceso;
  }
}

interface <Procesos> {
  // Atributos
  + id: Integer
  + tamaño: Real
  
  // Métodos
  constructor(id, tamaño) {
    proceso.id = id;
    proceso.tamaño = tamaño;
  }
}

class PCB extends <Procesos> () {
  // Atributos
  + registroIndice: Integer
  + contadorDePrograma: Integer
  + codigoDeCondicionamiento: Integer
  + biestableDeEstado: Integer

  // Metodos
}

class Procesos extends <Procesos> () {
  // Atributos
  + nombre: String;
  + estado: Enum('new', 'ready/suspend', 'ready', 'blocked', 'blocked/suspend', 'running', 'exit');
  + tiempoDeArribo: Real;
  + tiempoDeIrrupcion: Real;
  + prioridad: Integer;

  // Métodos
  constructor(nombre, estado, tiempoDeArribo, tiempoDeIrrupción, prioridad) {
    this.estado = estado;
    this.tiempoDeArribo = tiempoDeArribo;
    this.tiempoDeIrrupción = tiempoDeIrrupción;
    this.prioridad = prioridad;
    this.nombre = nombre;
  }
  + set_estado(estado): Boolean {
    this.estado = estado;
  }
  + set_prioridad(prioridad): Boolean {
    this.prioridad = prioridad;
  }
}

class SistemaOperativo extends <Procesos> () {
  // Atributos
  + procesos: List
  + procesosPequeños: Real
  + procesosMedianos: Real
  + procesosGrandes: Real
  + tamaño = 100;

  // Métodos
  constructor() {
    this.procesos = [];
    this.procesosPequeños = 60;
    this.procesosMedianos = 120;
    this.procesosGrandes = 250;
  }
  + generar_id_proceso() {
    return this.procesos.length;
  }
  + asignar_proceso(proceso, memoria): Boolean {
    si (proceso.tamaño < memoria.tamaño_disponible) {
      memoria.cargar_proceso(proceso);
    }
  }
  + gestionar_procesos(evento): Boolean {}
  + terminar_proceso(proceso): Boolean {}
  + cargar_proceso () {
    nombre = System.out.println("Ingrese nombre del proceso: ");
    tamaño = System.out.println("Ingrese tamaño del proceso: ");
    tiempoDeArribo = System.out.println("Ingrese Tiempo de Arribo del proceso: ");
    tiempoDeIrrupción = System.out.println("Ingrese Tiempo de Irrupción del proceso: ");
    id = this.generar_id_proceso();
    estado = "nuevo";
    nuevo_proceso = new Procesos(
      id, 
      nombre, 
      tamaño, 
      estado,
      tiempoDeArribo, 
      tiempoDeIrrupción
    );
    this.asignar_proceso(nuevo_proceso);
  }
}

class Eventos () {
  // Atributos
  + id: Integer
  + nombre: String

  // Métodos
  + disparar_evento(evento): Boolean {

  }
}


MAIN {

  sistemaOperativo = new SistemaOperativo();

  memoria = new Memoria(530);
  memoria.crear_particion(sistemaOperativo.tamaño, 0, 99);
  memoria.crear_particion(sistemaOperativo.procesosGrandes, 100, 349);
  memoria.crear_particion(sistemaOperativo.procesosMedianos, 350, 469);
  memoria.crear_particion(sistemaOperativo.procesosPequeños, 470, 529);

  sistemaOperativo.cargar_proceso();

}